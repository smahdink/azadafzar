{{ $comments := readDir "data/comments" }}
{{ $.Scratch.Add "hasComments" 0 }}
{{ $entryId := .File.UniqueID }}

{{ range $comments }}
  {{ if eq .Name $entryId }}
    {{ $.Scratch.Add "hasComments" 1 }}
    {{ range $index, $comments := (index $.Site.Data.comments $entryId ) }}
<blockquote>
<p>{{ .body | markdownify }}</p>
<cite>
  <img src="https://www.gravatar.com/avatar/{{ .email }}?s=100">
  <strong>{{ .name }}</strong><br><time>{{ dateFormat "2006-02-01" .date }}</time>
</cite>
</blockquote>
    {{ end }}       
  {{ end }}
{{ end }}

{{ if eq ($.Scratch.Get "hasComments") 0 }}
  <p>اولین نفری باشید که نظر می‌دهید.</p>
{{ end }}